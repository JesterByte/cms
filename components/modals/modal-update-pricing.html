<!-- Phase Update Pricing Modal -->
<div class="modal fade" id="updatePhasePricingModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="updatePhasePricingModalLabel" aria-hidden="true">    
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="updatePhasePricingModalLabel">Update Pricing</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="updatePricingForm" class="needs-validation" novalidate action="../process/process-update-pricing.php" method="post">
                    <div class="form-floating mb-3">
                        <select class="form-select" id="phaseSelect" name="phase" aria-label="Phase" required>
                            <option value="Phase 1">1</option>
                            <option value="Phase 2">2</option>
                            <option value="Phase 3">3</option>
                            <option value="Phase 4">4</option>
                        </select>
                        <label for="phaseSelect">Phase</label>
                    </div>
                    <div class="form-floating mb-3">
                        <select class="form-select" id="lotTypeSelect" name="lot_type" aria-label="Lot Type" required>
                            <option value="Supreme">Supreme</option>
                            <option value="Special">Special</option>
                            <option value="Standard">Standard</option>
                        </select>
                        <label for="lotTypeSelect">Lot Type</label>
                    </div>
                    <!-- <div class="form-floating mb-3">
                        <input type="text" class="form-control" id="newPrice" name="new_price" placeholder="New Price (₱)" required>
                        <label for="newPrice">New Price (₱)</label>
                    </div> --> 
                    <label for="newPhasePriceGroup" class="form-label">New Price</label>
                    <div class="input-group mb-3" id="newPhasePriceGroup">
                        <span class="input-group-text" id="newPhasePriceAddOn">₱</span>
                        <input type="number" step="0.01" pattern="^\d*(\.\d{0,2})?$" class="form-control" id="newPhasePrice" name="new_phase_price" placeholder="0.00" aria-label="0.00" aria-describedby="newPhasePriceAddOn" required>
                    </div>

                    <div class="form-text text-muted">
                        Other amounts will be automatically calculated based on the new price.
                    </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="submit" class="btn btn-primary" name="update_phase_pricing"><i class="bi bi-arrow-repeat"></i> Update price</button>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Estate Update Pricing Modal -->
<div class="modal fade" id="updateEstatePricingModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="updateEstatePricingModalLabel" aria-hidden="true">    
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="updateEstatePricingModalLabel">Update Pricing</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="updatePricingForm" class="needs-validation" novalidate action="../process/process-update-pricing.php" method="post">
                    <div class="form-floating mb-3">
                        <select class="form-select" id="estateSelect" name="estate" aria-label="Estate" required>
                            <option value="Estate A">A</option>
                            <option value="Estate B">B</option>
                            <option value="Estate C">C</option>
                        </select>
                        <label for="estateSelect">Estate</label>
                    </div>
                    <!-- <div class="form-floating mb-3">
                        <input type="text" class="form-control" id="newPrice" name="new_price" placeholder="New Price (₱)" required>
                        <label for="newPrice">New Price (₱)</label>
                    </div> --> 
                    <label for="newEstatePriceGroup" class="form-label">New Price</label>
                    <div class="input-group mb-3" id="newEstatePriceGroup">
                        <span class="input-group-text" id="newEstatePriceAddOn">₱</span>
                        <input type="number" step="0.01" pattern="^\d*(\.\d{0,2})?$" class="form-control" id="newEstatePrice" name="new_estate_price" placeholder="0.00" aria-label="0.00" aria-describedby="newEstatePriceAddOn" required>
                    </div>

                    <div class="form-text text-muted">
                        Other amounts will be automatically calculated based on the new price.
                    </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="submit" class="btn btn-primary" name="update_estate_pricing"><i class="bi bi-arrow-repeat"></i> Update price</button>
                </form>
            </div>
        </div>
    </div>
</div>

<style>
    /* Hide the up and down arrows for number input */
    input[type=number]::-webkit-outer-spin-button,
    input[type=number]::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
    }
    
    input[type=number] {
        appearance: textfield; /* Standard */
        -moz-appearance: textfield; /* Firefox */
    }
    </style>

<script>
    $(document).on('keydown', 'input[pattern]', function(e){
    var input = $(this);
    var oldVal = input.val();
    var regex = new RegExp(input.attr('pattern'), 'g');

    setTimeout(function(){
        var newVal = input.val();
        if(!regex.test(newVal)){
        input.val(oldVal); 
        }
    }, 1);
    });
</script>